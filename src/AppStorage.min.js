var AppStorage=function(e){var t={},s=function(){return Math.floor((new Date).getTime()/1e3)},n=function(){return Math.floor(1e8*Math.random()+1)},i=function(e){this.storage=e};i.prototype={supported:function(){return this.storage?!0:!1},set:function(e,t,n){this.supported()&&(t=JSON.stringify(t),this.storage.setItem(e,t),n&&this.storage.setItem(e+"_exp",s()+n))},get:function(e){return this.supported()?this.storage.getItem(e+"_exp")&&s()>=parseInt(this.storage.getItem(e+"_exp"))?(this.storage.getItem(e)&&this.storage.removeItem(e),this.storage.removeItem(e+"_exp"),null):JSON.parse(this.storage.getItem(e)):null},remove:function(e){this.supported()&&(this.storage.removeItem(e),this.storage.removeItem(e+"_exp"))},clear:function(){this.supported()&&this.storage.clear()},length:function(){if(this.supported()){var e=0;for(var t in localStorage)t.endsWith("_exp")||e++;return e}return 0},totalLength:function(){if(this.supported()){var e=0;for(var t in localStorage)e++;return e}return 0}};var a=function(){this.instanceClass=this.itemClass+"_"+n(),this.itemIndex={}};a.prototype={itemClass:"appStorageItem",supported:function(){return void 0!==e&&e?!0:!1},set:function(t,i,a){if(this.supported()){this.itemIndex[t]||(this.itemIndex[t]="#"+this.itemClass+"_"+n()),e.setJson(this.itemIndex[t],i);var o=document.getElementById(this.itemIndex[t].replace(/^#/,""));r.addClass(o,this.itemClass),r.addClass(o,this.instanceClass),a&&o.setAttribute("data-exp",s()+a)}},get:function(t){if(this.supported()&&this.itemIndex[t]){var n=document.getElementById(this.itemIndex[t].replace(/^#/,""));return n?n.getAttribute("data-exp")&&s()>=parseInt(n.getAttribute("data-exp"))?(r.remove(n),delete this.itemIndex[t],null):e.getJson(n):null}},remove:function(e){if(this.supported()&&this.itemIndex[e]){var t=document.getElementById(this.itemIndex[e].replace(/^#/,""));t&&(r.remove(t),delete this.itemIndex[e])}},clear:function(){if(this.supported()){var e=document.getElementsByClassName(this.instanceClass);e.length>0&&(r.remove(e),this.itemIndex={})}},length:function(){return this.supported()?document.getElementsByClassName(this.instanceClass).length:0},totalLength:function(){return this.supported()?document.getElementsByClassName(this.itemClass).length:0}};var r={addClass:function(e,t){this.hasClass(e,t)||(""!=e.className&&(t=" "+t),e.className=e.className+t)},removeClass:function(e,t){if(this.hasClass(e,t)){t=" "+t+" ";var s=(" "+e.className+" ").replace(/[\n\t\r]/g," ");s.replace(t,""),e.className=s}},hasClass:function(e,t){return t=" "+t+" ",(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(t)>-1?!0:!1},toggleClass:function(e,t){this.hasClass(e,t)?this.addClass(e,t):this.removeClass(e,t)},remove:function(e){if(e instanceof Element)e.parentElement.removeChild(e);else if(e instanceof NodeList||e instanceof HTMLCollection)for(var t=e.length-1;t>=0;t--)e[t]&&e[t].parentElement&&e[t].parentElement.removeChild(e[t])}};return t.local=new i(window.localStorage),t.session=new i(window.sessionStorage),t.page=new a,t};